<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>村長脫衣娃娃大禮包-官方海外商店</title>
  <style>
    :root{ --bg:#0b0f14; --card:#121a22; --muted:#6b7785; --text:#e6edf3; --acc:#4aa3ff; }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b0f14,#0e141b 40%,#101720);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto}
    .wrap{max-width:1100px;margin:40px auto;padding:0 16px}
    h1{font-size:28px;margin:0 0 16px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{background:var(--card);border:1px solid #1d2631;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .pad{padding:16px}
    .muted{color:var(--muted)}
    .btn{cursor:pointer;border:0;border-radius:12px;padding:10px 14px;background:var(--acc);color:#071522;font-weight:700}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .btn-ghost{background:transparent;border:1px solid #223040;color:var(--text)}
    .row{display:flex;gap:8px;align-items:center}
    .row > *{flex:1}
    input,select,textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #223040;background:#0d141c;color:var(--text)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px 10px;border-bottom:1px solid #1d2631}
    th{color:#9fb3c8;text-align:left}
    tfoot td{font-weight:700}
    .right{text-align:right}
    .tag{font-size:12px;padding:3px 8px;background:#0b1622;border:1px solid #223040;border-radius:999px;color:#8eb8ff}
    .qty{display:inline-flex;border:1px solid #223040;border-radius:10px;overflow:hidden;align-items:center}
    .qty button{all:unset;cursor:pointer;padding:6px 10px;background:#0b1622}
    .qty span{width:40px;text-align:center;display:inline-block;color:var(--text)}
    .ok{color:#6bff9b}
    .warn{color:#ffd06b}
    .error{color:#ff6b6b}
    .hint{font-size:12px;color:#9fb3c8}
    .contract-box{max-height:360px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:#0d141c;border:1px solid #223040;border-radius:8px;padding:12px 14px;font-size:14px;line-height:1.6;white-space:pre-wrap;}
    .agree-row{display:flex;align-items:center;gap:6px;margin-top:8px}
    .agree-row input[type=checkbox]{width:16px;height:16px;vertical-align:middle;}
    .agree-row label{line-height:1;cursor:pointer}
    #status{margin-top:8px;font-size:14px}
    footer{margin-top:40px;padding:20px;background:#0d141c;border-top:1px solid #223040;border-radius:8px;color:var(--text);font-size:14px;line-height:1.6}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>村長脫衣娃娃大禮包-官方海外商店</h1>

    <div class="grid">
      <!-- 商品清單 -->
      <section class="card pad" style="grid-column: span 7;">
        <h2>商品</h2>
        <div id="catalog"></div>
        <p class="hint" style="margin-top:8px">※ 顯示價格為<strong>商品售價</strong>，<strong>不含運費</strong>。運費將依國家／地區與商品重量尺寸<strong>另計</strong>。</p>
      </section>

      <!-- 購物車與結帳表單 -->
      <aside class="card pad" style="grid-column: span 5;">
        <h2>購物車</h2>
        <div id="cartEmpty" class="muted">尚未選擇商品</div>
        <table id="cartTable" style="display:none">
          <thead><tr><th>品名</th><th class="right">單價</th><th class="right">數量</th><th class="right">小計</th><th></th></tr></thead>
          <tbody id="cartBody"></tbody>
          <tfoot>
            <tr><td colspan="3" class="right">商品合計（不含運費）</td><td class="right" id="itemsTotal">NT$ 0</td><td></td></tr>
          </tfoot>
        </table>
        <div style="height:12px"></div>
        <label class="hint" for="shipMethod">收件方式（運費另計）：</label>
        <select id="shipMethod" style="margin-top:6px">
          <option value="">請選擇收件方式</option>
          <option value="711intl">7-11 國際賣貨便（運費另計）</option>
          <option value="chpost">中華郵政 國際包裹（運費另計）</option>
        </select>
        <p class="hint" style="margin-top:8px">運費將依國家／地區與商品重量尺寸另計，並於後續通知。</p>
        <div style="height:12px"></div>

        <!-- 額外收件資訊 -->
        <label for="country">收件 國家/地區：</label>
        <input type="text" id="country" placeholder="例：日本 / 美國 / 新加坡...">
        <div style="height:8px"></div>
        <label for="address">7-11國際交貨便收件門市資訊 或 收件地址：</label>
        <textarea id="address" rows="2"></textarea>
        <div style="height:8px"></div>
        <label for="contact">Instagram帳號 或 Email 聯絡方式 (建議留IG帳號)：</label>
        <input type="text" id="contact" placeholder="@my_ig 或 example@mail.com">
        <div style="height:12px"></div>

        <!-- 合約書與同意開關 -->
        <h3>購買合約書</h3>
        <div class="contract-box" tabindex="0"> ...合約內容略... </div>
        <div class="agree-row">
          <input type="checkbox" id="agreeContract">
          <label for="agreeContract">我已閱讀並同意購買合約書</label>
        </div>

        <div style="height:12px"></div>
        <button class="btn" id="checkout">送出訂單</button>
        <div id="status" class="muted"></div>
      </aside>
    </div>

    <!-- 資訊與提醒 -->
    <footer class="info-box">
      <p><strong>訂單處理後村長會主動聯繫您，請留意陌生訊息。</strong></p>
      <p>提醒您：請務必認明賣方唯一官方 IG 帳號：<strong>jiajiou_studio</strong></p>
      <p>村長 / JIA JIOU INC. 不會以任何理由向您索取銀行帳號、信用卡卡號、金融密碼或簡訊驗證碼。<br>
         所有交易僅透過 <strong>藍新金流（NewebPay）</strong> 進行收款，請消費者提高警覺，以避免遭受詐騙。</p>
      <p>如有任何疑問，請透過官方管道聯繫：</p>
      <ul>
        <li>📩 官方 Email：<a href="mailto:jiajiou@jiajiou.com">jiajiou@jiajiou.com</a></li>
        <li>📱 官方 IG：<a href="https://instagram.com/jiajiou_studio" target="_blank">jiajiou_studio</a></li>
      </ul>
      <hr>
      <p><strong>公司資訊</strong></p>
      <ul>
        <li>Instagram：jiajiou_studio</li>
        <li>Email：jiajiou@jiajiou.com</li>
        <li>公司：加玖有限公司 (JIA JIOU INC.)</li>
        <li>統編：60794845</li>
      </ul>
    </footer>
  </div>

  <script>
    const fmt = { format: (n) => `NT$ ${new Intl.NumberFormat('zh-TW', { minimumFractionDigits: 0, maximumFractionDigits: 2 }).format(n)}` };

    const CATALOG = [
      { id: "A01", name: "村長脫衣娃娃大禮包", price: 350 }
    ];

    const state = { cart:[], shipMethod: '' };

    function renderCatalog(){
      const root = document.getElementById('catalog');
      root.innerHTML = '';
      CATALOG.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card pad';
        card.style.marginBottom = '10px';
        card.innerHTML = `
          <div class="row" style="align-items:flex-start;gap:12px">
            <div style="flex:1">
              <div style="font-weight:700;font-size:18px">${p.name}</div>
              <div class="muted">#${p.id}</div>
            </div>
            <div class="right" style="min-width:180px">
              <div style="font-weight:700">${fmt.format(p.price)}</div>
              <div style="height:6px"></div>
              <div class="qty">
                <button onclick="changeQty('${p.id}', -1)">-</button>
                <span id="qty-${p.id}">1</span>
                <button onclick="changeQty('${p.id}', 1)">+</button>
              </div>
              <div style="height:6px"></div>
              <button class="btn" onclick="addToCart('${p.id}')">加入購物車</button>
            </div>
          </div>`;
        root.appendChild(card);
      });
    }

    function changeQty(id, d){
      const el = document.getElementById('qty-'+id);
      let v = parseInt(el.textContent||'1',10)+d;
      v = Math.min(999, Math.max(1, v));
      el.textContent = v;
    }

    function addToCart(id){
      const qty = parseInt(document.getElementById('qty-'+id).textContent||'1',10);
      const exist = state.cart.find(x => x.id === id);
      if(exist) exist.qty = Math.min(999, exist.qty + qty); else state.cart.push({ id, qty });
      renderCart();
    }

    function removeFromCart(id){ state.cart = state.cart.filter(x => x.id !== id); renderCart(); }

    function updateLineQty(id, d){
      const line = state.cart.find(x=>x.id===id); if(!line) return;
      line.qty = Math.min(999, Math.max(1, (line.qty||1)+d));
      renderCart();
    }

    function renderCart(){
      const empty = document.getElementById('cartEmpty');
      const table = document.getElementById('cartTable');
      const body = document.getElementById('cartBody');
      body.innerHTML = '';
      if(state.cart.length === 0){ empty.style.display='block'; table.style.display='none'; updateTotals(0); return; }
      empty.style.display='none'; table.style.display='table';

      let itemsTotal = 0;
      for(const line of state.cart){
        const p = CATALOG.find(x=>x.id===line.id); if(!p) continue;
        const sub = p.price * line.qty; itemsTotal += sub;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${p.name}</td>
          <td class="right">${fmt.format(p.price)}</td>
          <td class="right">
            <div class="qty" style="float:right">
              <button onclick="updateLineQty('${line.id}', -1)">-</button>
              <span>${line.qty}</span>
              <button onclick="updateLineQty('${line.id}', 1)">+</button>
            </div>
          </td>
          <td class="right">${fmt.format(sub)}</td>
          <td class="right"><button class="btn-ghost" onclick="removeFromCart('${line.id}')">刪除</button></td>`;
        body.appendChild(tr);
      }

      updateTotals(itemsTotal);
    }

    function updateTotals(itemsTotal){
      const itemsEl = document.getElementById('itemsTotal');
      if (itemsEl) itemsEl.textContent = fmt.format(itemsTotal);
    }

    function checkout(){
      const status = document.getElementById('status');
      status.textContent = '';

      if(state.cart.length === 0){
        status.innerHTML = '<span class="error">⛔ 請先將商品加入購物車</span>';
        return;
      }
      if(!state.shipMethod){
        status.innerHTML = '<span class="error">⛔ 請選擇收件方式</span>';
        return;
      }
      const country = document.getElementById('country').value.trim();
      if(!country){
        status.innerHTML = '<span class="error">⛔ 請填寫收件國家/地區</span>';
        return;
      }
      const address = document.getElementById('address').value.trim();
      if(!address){
        status.innerHTML = '<span class="error">⛔ 請填寫7-11國際交貨便門市資訊或收件地址</span>';
        return;
      }
      const contact = document.getElementById('contact').value.trim();
      if(!contact){
        status.innerHTML = '<span class="error">⛔ 請填寫聯絡方式 (建議留IG帳號)</span>';
        return;
      }
      const agree = document.getElementById('agreeContract').checked;
      if(!agree){
        status.innerHTML = '<span class="error">⛔ 請先閱讀並同意購買合約書</span>';
        return;
      }

      const method = state.shipMethod === '711intl' ? '7-11 國際賣貨便' : '中華郵政 國際包裹';
      status.innerHTML = `<span class="ok">✅ 訂單已通過檢查，示範送出...<br>收件方式：${method}<br>國家/地區：${country}<br>地址：${address}<br>聯絡方式：${contact}<br>運費：另計<br>合約：已同意</span>`;
    }

    function boot(){
      renderCatalog();
      renderCart();
      const shipSel = document.getElementById('shipMethod');
      if (shipSel) shipSel.addEventListener('change', (e)=>{ state.shipMethod = e.target.value; });
      document.getElementById('checkout').addEventListener('click', checkout);
    }
    boot();
    window.changeQty = changeQty;
    window.addToCart = addToCart;
    window.updateLineQty = updateLineQty;
    window.removeFromCart = removeFromCart;

  </script>
</body>
</html>
